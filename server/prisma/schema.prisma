generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "debian-openssl-1.1.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  email     String   @unique
  password  String
  role      Role
  station   Station?
}

model Station {
  id          Int          @id @default(autoincrement())
  name        String       @unique
  user        User         @relation(fields: [userId], references: [id])
  userId      Int
  inspections Inspection[]
}

model Model {
  id             Int          @id @default(autoincrement())
  bodyType       String
  make           String
  model          String
  generation     String
  engineCapacity Float /// [dm^3]=[liters]
  enginePower    Int /// [HP]
  engineType     EngineType
  Inspection     Inspection[]
}

model Inspection {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  station   Station  @relation(fields: [stationId], references: [id])
  stationId Int

  // Identification
  model                 Model    @relation(fields: [modelId], references: [id])
  modelId               Int
  mileage               Int /// [KM]
  firstRegistrationDate DateTime
  age                   Int /// [months] calc: createdAt - firstRegistrationDate

  // Additional equipment

  // Tires
  // Lights
  // Braking system
  // Steering system
  // Undercarriage, suspension and other
  // Electrical installation
  // Body and equipment
  // Environmental protection issues
  // Additional conditions

}

enum Role {
  DIAGNOSTICIAN
  ANALYST
}

enum EngineType {
  DIESEL
  PETROL
  ELECTRIC
  HYBRID
}
